"use strict";(self.webpackChunktonswap_web=self.webpackChunktonswap_web||[]).push([[960],{47960:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var i=t(30357),r=t(45366),o=t(18740),a=t(68963),u=t(78344),s=t(80124),c=t(30371),d=t(94361),l=t(74650),v=t(88027),f=t(19867),m=t(71545),p=t(5922),Z=t(88214),T=t(15861),x=t(70885),k=t(71879),y=t(82536),h=t(77563),g=t(84672),A=t(75),q=t(70123),I=t(45022),L=t(87673),M=t(75859),R=function(){var e=(0,f.x)(),n=e.srcTokenAmount,t=e.destTokenAmount,i=e.selectedToken,r=(0,a.useState)(!1),o=(0,x.Z)(r,2),u=o[0],s=o[1],c=(0,a.useState)(!0),l=(0,x.Z)(c,2),v=l[0],m=l[1],p=function(){var e=(0,T.Z)((0,Z.Z)().mark((function e(n,t,r,o){var a,u;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==i&&void 0!==i&&i.name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h.kI(null===i||void 0===i?void 0:i.tokenMinter);case 4:if("0"!=(a=e.sent).tokenReserves.toString()||"0"!=a.tonReserves.toString()){e.next=7;break}return e.abrupt("return",0);case 7:return e.next=9,h.hZ(n,t,r,o);case 9:return u=e.sent,e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(n,t,i,r){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(i){var e=function(){var e=(0,T.Z)((0,Z.Z)().mark((function e(){var n;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.E3(I.Address.parse(i.ammMinter));case 3:n=e.sent,(0,I.fromNano)(n.tokenReserves),(0,I.fromNano)(n.tonReserves),n.tokenReserves.isZero()||n.tonReserves.isZero()||s(!0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,9,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}}),[i]);return(0,g.Z)(),!i||v?(0,M.jsx)(L.Z,{}):(0,M.jsx)(y.Z,{icon:(0,M.jsx)(q.Z,{}),getAmountFunc:p,getBalances:function(){return Promise.all([h.gF(),h.yX(i)])},srcToken:k.nS,getTxRequest:function(){if(d.Z.addLiquidityTransaction(),i)return h.El(null===i||void 0===i?void 0:i.tokenMinter,n,t)},destToken:i,submitButtonText:"Add TON/".concat(null===i||void 0===i?void 0:i.displayName," liquidity"),refreshAmountsOnActionChange:!0,actionCategory:A.hX.MANAGE_LIQUIDITY,actionType:A.Us.ADD_LIQUIDITY,gasFee:h.et.ADD_LIQUIDITY,disableInputDependency:!u})},j=t(99307),b=function(){var e=(0,f.x)(),n=e.srcTokenAmount,t=e.selectedToken;return(0,g.Z)(),t?(0,M.jsx)(y.Z,{icon:(0,M.jsx)(j.Z,{}),getTxRequest:function(){return d.Z.removeLiquidityTransaction(),h.WU(t.tokenMinter,n)},getAmountFunc:h.hZ,getBalances:function(){return h.xN(t.tokenMinter)},srcToken:k.nS,destToken:t,submitButtonText:"Remove TON/".concat(null===t||void 0===t?void 0:t.displayName," liquidity"),refreshAmountsOnActionChange:!0,actionCategory:A.hX.MANAGE_LIQUIDITY,actionType:A.Us.REMOVE_LIQUIDITY,gasFee:h.et.REMOVE_LIQUIDITY}):null};var D=function(){var e=(0,f.x)().selectedToken,n=(0,o.Z)(),t=(0,u.UO)(),Z=(0,p.xB)(t),T=(0,l.Kr)().onOperationTypeChange;(0,r.Z)((function(){T(v.C8.MANAGE_LIQUIDITY)}));var x=(0,a.useMemo)((function(){return e?[{text:"Add liquidity",method:function(){d.Z.goToAddLiquidity(),n(s.Z.manageLiquidity.navigateToAddLiquidity.replace(":id",null===e||void 0===e?void 0:e.tokenMinter))}},{text:"Remove liquidity",method:function(){d.Z.goToRemoveLiquidity(),n(s.Z.manageLiquidity.navigateToRemoveLiquidity.replace(":id",null===e||void 0===e?void 0:e.tokenMinter))}}]:[]}),[n,e]);return(0,M.jsxs)(m.Fi,{children:[e&&(0,M.jsx)(i.Z,{items:x,action:Z}),(0,M.jsxs)(u.Z5,{children:[(0,M.jsx)(u.AW,{path:s.Z.manageLiquidity.addLiquidity,element:(0,M.jsx)(R,{})}),(0,M.jsx)(u.AW,{path:s.Z.manageLiquidity.removeLiquidity,element:(0,M.jsx)(b,{})}),(0,M.jsx)(u.AW,{path:s.Z.manageLiquidity.tokens,element:(0,M.jsx)(c.n,{onTokenSelect:function(e){d.Z.selectTokenToManageLiquidity(e.displayName),n(s.Z.manageLiquidity.navigateToAddLiquidity.replace(":id",e.tokenMinter))},title:"Select a token to manage liquidity"})})]})]})}},70123:function(e,n,t){var i=t(64836);n.Z=void 0;var r=i(t(43563)),o=t(75859),a=(0,r.default)((0,o.jsx)("path",{d:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"}),"AddRounded");n.Z=a},99307:function(e,n,t){var i=t(64836);n.Z=void 0;var r=i(t(43563)),o=t(75859),a=(0,r.default)((0,o.jsx)("path",{d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1z"}),"RemoveRounded");n.Z=a}}]);