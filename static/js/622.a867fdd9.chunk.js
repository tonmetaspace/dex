"use strict";(self.webpackChunktonswap_web=self.webpackChunktonswap_web||[]).push([[622],{94659:function(e,n,r){var t=r(39736),a=r(75926),i=r(75174),o=r(39910),s=r(55204),c=r(99581),u=r(75),l=r(39417),d=r(75859),f=(0,i.ZP)(s.Z)({display:"flex",flexDirection:"column",alignItems:"center",gap:10});n.Z=function(e){var n=e.open,r=e.children,i=(0,l.X)().adapterId,s=!c.tq&&i===u.ht.TON_HUB;return(0,d.jsx)(t.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1},backdropFilter:"blur(5px) "},open:n,children:(0,d.jsxs)(f,{children:[(0,d.jsx)(a.Z,{color:"inherit"}),r,s&&(0,d.jsx)(o.Z,{children:"Please check tonhub wallet for pending notification"})]})})}},18062:function(e,n,r){var t=r(68963),a=r(80447),i=r(75174),o=r(51998),s=r(55204),c=r(97719),u=r(75859),l=(0,i.ZP)(s.Z)({"& &":{color:"white"},"& a":{color:"white"}});n.Z=function(){var e=(0,a.Ds)(),n=e.enqueueSnackbar,r=e.closeSnackbar;return{showNotification:(0,t.useCallback)((function(e){var t=e.message,a=e.variant,i=e.onClose,s=e.autoHideDuration,d=e.anchorOrigin,f=e.className,p=void 0===f?"":f,h=n((0,u.jsx)(l,{children:t}),{className:p,anchorOrigin:d,variant:a,autoHideDuration:s||5e3,onClose:i,onClick:function(){return r(h)},action:function(){return(0,u.jsx)(o.Z,{children:(0,u.jsx)(c.Z,{style:{width:20,height:20}})})}})}),[r,n])}}},19622:function(e,n,r){r.r(n),r.d(n,{default:function(){return E}});var t=r(88214),a=r(15861),i=r(70885),o=r(62399),s=r(39910),c=r(96763),u=r(68963),l=r(45731),d=r(45022),f=r(47079),p=r(77563),h=r(5922),m=r(18366),x=r(94659),v=r(18062),g=(0,m.Z)(o.Z)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",paddingBottom:"100px",paddingTop:50,width:"100%","& .screen-title":{marginBottom:30}}),Z=r(99263),w=r(75859),k=(0,m.Z)(o.Z)({width:"100%",marginBottom:20}),b=(0,m.Z)(o.Z)({"& p":{fontSize:12,color:"red",marginTop:5}}),j=function(e){var n=e.onSubmit,r=(0,u.useState)(""),o=(0,i.Z)(r,2),c=o[0],l=o[1],f=(0,u.useState)(!1),p=(0,i.Z)(f,2),h=p[0],m=p[1],x=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(r),48===r.length){e.next=3;break}return e.abrupt("return");case 3:try{d.Address.parse(r),n(r),h&&m(!1)}catch(t){m(!0)}case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(k,{children:[(0,w.jsx)(Z.Z,{className:"input",fullWidth:!0,label:"Enter jetton minter address",value:c,placeholder:"EQDrjaLahLkMB-hMCmkzOyBuHJ139ZUYmPHu6RRBKnbdLIYI",onChange:function(e){return x(e.target.value)},onFocus:function(){return m(!1)}}),h&&(0,w.jsx)(b,{children:(0,w.jsx)(s.Z,{children:"Invalid Address"})})]})};var y=function(e){var n=e.onFocus,r=e.onBlur;(0,u.useEffect)((function(){var e=function(){"visible"===document.visibilityState?n():r()};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[])};var I=function(e){var n=(0,u.useRef)(),r=(0,u.useCallback)((function(){clearInterval(n.current)}),[]);return(0,u.useEffect)((function(){return function(){r()}}),[r]),{startInterval:function(r){n.current=setInterval((function(){r()}),e||1e3)},stopInterval:r}};var S=function(){var e=I(),n=e.startInterval,r=e.stopInterval,i=(0,u.useRef)({}),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.dH(i.current.contractAddress);case 2:if(!e.sent){e.next=8;break}return i.current.isPollInProgress=!1,c(),i.current.onFinish(),e.abrupt("return");case 8:if(!(i.current.pollTries>=40)){e.next=13;break}return c(),i.current.onTimeout(),i.current.isPollInProgress=!1,e.abrupt("return");case 13:i.current.pollTries++;case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(a){var s,c,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.onFinish,c=a.onTimeout,u=a.contractAddress,i.current={onFinish:s,pollTries:0,isPollInProgress:!0,contractAddress:u,onTimeout:c},r(),n(o);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=function(){i.current.pollTries=0,r()};return(0,u.useEffect)((function(){return function(){r()}}),[]),y({onFocus:function(){i.current.isPollInProgress&&n(o)},onBlur:c}),{poll:s,cancelPolling:c}},T=r(80124),F=r(17464),P=r(39417),C=r(18740),B=(0,m.Z)(o.Z)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",maxWidth:400});var D=(0,m.Z)(o.Z)({display:"flex",alignItems:"center",gap:20,marginTop:20,marginBottom:40,"& .token-details-right":{},"& img":{height:"70px",width:"70px"},"& p":{fontSize:15}}),A=function(e){var n=e.tokenBalance,r=e.tokenData;return(0,w.jsxs)(D,{children:[(0,w.jsx)("img",{src:r.image,alt:""}),(0,w.jsxs)(o.Z,{className:"token-details-right",children:[(0,w.jsxs)(s.Z,{children:["Name: ",r.name]}),n&&(0,w.jsxs)(s.Z,{children:[" My Balance: ",n.toLocaleString()]})]})]})},E=function(){var e=(0,u.useState)(""),n=(0,i.Z)(e,2),r=n[0],o=n[1],m=(0,u.useState)(),Z=(0,i.Z)(m,2),k=Z[0],b=Z[1],y=(0,u.useState)(!1),I=(0,i.Z)(y,2),D=I[0],E=I[1],L=(0,u.useState)(!1),N=(0,i.Z)(L,2),q=N[0],H=N[1],z=(0,u.useState)(),M=(0,i.Z)(z,2),_=M[0],O=M[1],R=S().poll,U=(0,F._)().addToken,X=(0,P.X)(),J=X.adapterId,K=X.session,W=(0,C.Z)(),Y=(0,v.Z)().showNotification,Q=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a,i,s,c,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H(!0),o(n),r=d.Address.parse(n),e.next=6,(0,p.wl)(r);case 6:return a=e.sent,e.next=9,(0,l.J6)(r,0);case 9:if(i=e.sent,s=i.futureAddress,!i.isDeployed){e.next=17;break}G(s.toFriendly(),r.toFriendly(),a),W("".concat(T.Z.manageLiquidity.navigateToAddLiquidity.replace(":id",s.toFriendly()))),e.next=24;break;case 17:return e.next=19,(0,p.BX)(r);case 19:c=e.sent,u=(0,d.fromNano)(c.balance),O(a),b(u),H(!1);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),e.t0 instanceof Error&&(console.log(e.t0),H(!1),Y({message:(0,w.jsx)(w.Fragment,{children:"Something went wrong"}),variant:"error"}));case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var a,i,o,s=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:r,i=s.length>2&&void 0!==s[2]?s[2]:_){e.next=4;break}return e.abrupt("return");case 4:o={name:i.name,ammMinter:n,tokenMinter:a,color:(0,h.mr)(),displayName:i.name.toUpperCase(),image:i.image,isCustom:!0},U(o);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),e.next=4,(0,l._e)(d.Address.parse(r));case 4:if(n=e.sent){e.next=7;break}throw new Error("Transaction error");case 7:if(n&&!n.error){e.next=9;break}throw new Error(n.error);case 9:return e.next=11,f.z.requestTransaction(J,K,n);case 11:return e.next=13,(0,h.gw)(5e3);case 13:R({onFinish:function(){G(n.to),Y({message:(0,w.jsx)(w.Fragment,{children:"Pool deployed successfully"}),variant:"success"}),E(!1),W("".concat(T.Z.manageLiquidity.navigateToAddLiquidity.replace(":id",n.to)))},onTimeout:function(){Y({message:(0,w.jsx)(w.Fragment,{children:"Something went wrong"}),variant:"error"})},contractAddress:n.to}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),E(!1),e.t0 instanceof Error&&Y({message:(0,w.jsx)(w.Fragment,{children:"Something went wrong"}),variant:"error"});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(g,{children:[(0,w.jsx)(x.Z,{open:D,children:(0,w.jsx)(s.Z,{children:"Deploying pool..."})}),(0,w.jsx)(x.Z,{open:q,children:(0,w.jsx)(s.Z,{children:"Loading..."})}),(0,w.jsxs)(B,{children:[(0,w.jsx)(c.UH,{title:"Create a new Pool"}),(0,w.jsx)(j,{onSubmit:Q}),_&&(0,w.jsx)(A,{tokenData:_,tokenBalance:k}),(0,w.jsx)(c.Kk,{isDisabled:!(r.length&&d.Address.isFriendly(r)&&(null===_||void 0===_?void 0:_.name)),onClick:V,children:"Deploy Pool \ud83d\ude80"})]})]})}}}]);