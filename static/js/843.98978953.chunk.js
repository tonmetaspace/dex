"use strict";(self.webpackChunktonswap_web=self.webpackChunktonswap_web||[]).push([[843],{62843:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var i=t(29439),o=t(68963),r=t(55204),s=t(69351),l=t(14512),a=t(54958),d=t(39910),u=t(49298),c=t(81003),x=t(19867),m=t(55195),h=t(74165),f=t(15861),p=t(93431),v=t(91691),j=t(5922),g=t(42744),Z=t(1532),k=t(39417),y=function(){var e,n=(0,k.X)().wallet,t=(0,x.x)().selectedToken,i=(0,p.v9)((function(e){return e.poolInfo})),r=(0,v.Z)(c.nS.name,(0,j.wE)((null===(e=i.tonReserves)||void 0===e?void 0:e.muln(2))||0,c.nS.decimals)).usd,s=(0,p.I0)(),l=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.ammMinter)&&(null===t||void 0===t?void 0:t.tokenMinter)&&s((0,g.x)({ammMinter:t.ammMinter,ammVersion:t.ammVersion||1.2,usd:r,tokenDecimals:t.decimals}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){(null===i||void 0===i?void 0:i.tokenReserves)&&(null===i||void 0===i?void 0:i.totalSupply)&&(null===i||void 0===i?void 0:i.tonReserves)&&(null===r||void 0===r?void 0:r.length)&&(null===t||void 0===t?void 0:t.tokenMinter)&&(null===t||void 0===t?void 0:t.ammMinter)&&s((0,g.H)({tokenMinter:t.tokenMinter,ammMinter:t.ammMinter,usd:r,totalSupply:i.totalSupply,tonReserves:i.tonReserves,tokenDecimals:t.decimals,tokenReserves:i.tokenReserves}))};(0,o.useEffect)((function(){parseFloat(r)&&null!==n&&void 0!==n&&n.address?a():parseFloat(r)&&l()}),[r]);return{fetchPoolData:l,poolInfo:i,resetPoolInfo:function(){return s((0,Z._)())},fetchExtendedData:a}},T=t(70342),I=t(33608),A=t(18366),S=t(75926),w=t(75859),L=(0,A.Z)(r.Z)({maxWidth:380,margin:"auto"}),M=(0,A.Z)(s.Z)({background:"linear-gradient(180deg, #F3F3F3 0%, #F9F9F9 100%)",boxShadow:"none",borderRadius:"12px !important",".MuiButtonBase-root .MuiAccordionSummary-root .Mui-expanded":{height:"20px",minHeight:"0 !important"}}),q=(0,A.Z)(l.Z)({margin:"0 !important",".Mui-expanded":{height:"24px !important",margin:"0 !important"}}),b=(0,A.Z)(r.Z)({display:"flex",alignItems:"center",justifyContent:"center"}),E=(0,A.Z)(a.Z)({width:22,height:22,marginRight:8}),D=(0,A.Z)(r.Z)({display:"flex",alignItems:"center"}),R=(0,A.Z)(r.Z)({display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",marginBottom:8}),F=(0,A.Z)(R)({justifyContent:"center",marginBottom:0}),N=(0,A.Z)(d.Z)({color:"#000",fontSize:"12px",fontWeight:400,letterSpacing:"-0.15px",fontFamily:"Roboto",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:150}),B=(0,A.Z)(N)({textAlign:"center",color:"#B9B9B9"}),O=(0,A.Z)(N)({fontWeight:700,textAlign:"center",maxWidth:350}),C=function(){var e=y(),n=e.fetchPoolData,t=e.poolInfo,s=e.resetPoolInfo,l=e.fetchExtendedData,a=(0,k.X)().wallet,d=(0,x.x)().selectedToken,h=(0,m.$)().t,f=(0,x.x)().totalBalances,p=(0,o.useState)(!1),v=(0,i.Z)(p,2),j=v[0],g=v[1];return(0,o.useEffect)((function(){a&&j&&l()}),[j,a,f]),(0,o.useEffect)((function(){return n(),function(){s()}}),[d]),(0,w.jsx)(L,{children:(0,w.jsxs)(M,{children:[(0,w.jsx)(q,{onClick:function(){return g((function(e){return!e}))},children:(0,w.jsxs)(F,{children:[(0,w.jsx)(O,{children:h("pool-info")}),j?(0,w.jsx)(I.Z,{sx:{color:"black"}}):(0,w.jsx)(T.Z,{sx:{color:"black"}})]})}),(0,w.jsx)(u.Z,{sx:{paddingTop:0},children:t.isLoading?(0,w.jsx)(b,{children:(0,w.jsx)(S.Z,{size:20})}):(0,w.jsxs)(r.Z,{sx:{marginTop:-2},children:[(0,w.jsxs)(R,{children:[(0,w.jsxs)(N,{children:[h("liquidity")," (TVL)"]}),(0,w.jsxs)(N,{children:["$",t.extendedInfo.liquidity]})]}),(0,w.jsxs)(R,{children:[(0,w.jsxs)(N,{children:["Total ",t.extendedInfo.lpTokenName]}),(0,w.jsx)(N,{children:t.extendedInfo.totalLPTokenAmount})]}),(0,w.jsxs)(R,{children:[(0,w.jsxs)(D,{children:[(null===c.nS||void 0===c.nS?void 0:c.nS.image)&&(0,w.jsx)(E,{src:c.nS.image,alt:"token"}),(0,w.jsx)(N,{sx:{display:"flex",alignItems:"center"},children:"TON"})]}),(0,w.jsx)(N,{children:t.extendedInfo.poolTonAmount})]}),(0,w.jsxs)(R,{children:[(0,w.jsxs)(D,{children:[(null===d||void 0===d?void 0:d.image)&&(0,w.jsx)(E,{src:d.image,alt:"token"}),(0,w.jsx)(N,{sx:{display:"flex",alignItems:"center"},children:(null===d||void 0===d?void 0:d.displayName)||"TOKEN"})]}),(0,w.jsx)(N,{children:t.extendedInfo.poolTokenAmount})]}),a&&(0,w.jsxs)(w.Fragment,{children:[" ",(0,w.jsx)(r.Z,{sx:{width:"100%",height:1,borderBottom:"1px solid #E4E4E4"},my:2}),(0,w.jsxs)(r.Z,{children:[(0,w.jsx)(b,{children:(0,w.jsx)(O,{mb:1,children:h("your-current-lp")})}),parseFloat(t.extendedInfo.userShareOfLiquidityPool)?(0,w.jsxs)(r.Z,{children:[(0,w.jsxs)(R,{children:[(0,w.jsx)(N,{children:t.extendedInfo.lpTokenName}),(0,w.jsx)(N,{children:t.extendedInfo.userLPTokenAmount})]}),(0,w.jsxs)(R,{children:[(0,w.jsx)(N,{children:h("share-of-pool")}),(0,w.jsxs)(N,{children:[t.extendedInfo.userShareOfLiquidityPool,"%"]})]}),(0,w.jsxs)(R,{children:[(0,w.jsxs)(D,{children:[(null===c.nS||void 0===c.nS?void 0:c.nS.image)&&(0,w.jsx)(E,{src:c.nS.image,alt:"token"}),(0,w.jsx)(N,{sx:{display:"flex",alignItems:"center"},children:"TON"})]}),(0,w.jsx)(N,{children:t.extendedInfo.userTonAmount})]}),(0,w.jsxs)(R,{children:[(0,w.jsxs)(D,{children:[(null===d||void 0===d?void 0:d.image)&&(0,w.jsx)(E,{src:d.image,alt:"token"}),(0,w.jsx)(N,{sx:{display:"flex",alignItems:"center"},children:(null===d||void 0===d?void 0:d.displayName)||"TOKEN"})]}),(0,w.jsx)(N,{children:t.extendedInfo.userTokenAmount})]}),(0,w.jsxs)(R,{children:[(0,w.jsxs)(N,{children:["USD ",h("value")]}),(0,w.jsxs)(N,{children:["$",t.extendedInfo.userUSDValueAmount]})]})]}):(0,w.jsx)(b,{children:(0,w.jsx)(B,{children:h("no-liquidity")})})]})]})]})})]})})},U=t(30357),P=t(45366),_=t(18740),W=t(79711),Q=t(80124),V=t(30371),Y=t(94361),$=t(74650),X=t(88027),G=t(71545),K=t(63317),z=t(77563),H=t(84672),J=t(75),ee=t(70123),ne=t(45022),te=t(87673),ie=function(){var e=(0,x.x)(),n=e.srcTokenAmount,t=e.destTokenAmount,r=e.selectedToken,s=(0,o.useState)(!1),l=(0,i.Z)(s,2),a=l[0],d=l[1],u=(0,o.useState)(!0),p=(0,i.Z)(u,2),v=p[0],g=p[1],Z=(0,m.$)().t,k=y().fetchPoolData,T=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(n,t,i,o){var s,l;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r&&void 0!==r&&r.name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,z.kI(null===r||void 0===r?void 0:r.tokenMinter);case 4:if("0"!=(s=e.sent).tokenReserves.toString()||"0"!=s.tonReserves.toString()){e.next=7;break}return e.abrupt("return",0);case 7:return e.next=9,z.hZ(n,t,i,o);case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(n,t,i,o){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){if(r){var e=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(){var n;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.E3(ne.Address.parse(r.ammMinter),r.ammVersion);case 3:n=e.sent,(0,j.wE)(n.tokenReserves,null===r||void 0===r?void 0:r.decimals),(0,j.wE)(n.tonReserves,9),n.tokenReserves.isZero()||n.tonReserves.isZero()||d(!0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:return e.prev=11,g(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,9,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}}),[r]);return(0,H.Z)(),!r||v?(0,w.jsx)(te.Z,{}):(0,w.jsx)(K.Z,{icon:(0,w.jsx)(ee.Z,{}),getAmountFunc:T,getBalances:function(){return Promise.all([z.gF(),z.yX(r)])},srcToken:c.nS,getTxRequest:function(){if(Y.Z.addLiquidityTransaction(),r)return z.El(null===r||void 0===r?void 0:r.tokenMinter,n,t)},destToken:r,submitButtonText:Z("add-ton-liquidity",{token:null===r||void 0===r?void 0:r.displayName}),refreshAmountsOnActionChange:!0,actionCategory:J.hX.MANAGE_LIQUIDITY,actionType:J.Us.ADD_LIQUIDITY,gasFee:z.et.ADD_LIQUIDITY,disableInputDependency:!a,onSuccess:k})},oe=t(99307),re=function(){var e=(0,x.x)(),n=e.srcTokenAmount,t=e.selectedToken,i=(0,m.$)().t,o=y().fetchPoolData;return(0,H.Z)(),t?(0,w.jsx)(K.Z,{icon:(0,w.jsx)(oe.Z,{}),getTxRequest:function(){return Y.Z.removeLiquidityTransaction(),z.WU(t.tokenMinter,n)},getAmountFunc:z.hZ,getBalances:function(){return z.xN(t.tokenMinter)},srcToken:c.nS,destToken:t,submitButtonText:i("remove-ton-liquidity",{token:null===t||void 0===t?void 0:t.displayName}),refreshAmountsOnActionChange:!0,actionCategory:J.hX.MANAGE_LIQUIDITY,actionType:J.Us.REMOVE_LIQUIDITY,gasFee:z.et.REMOVE_LIQUIDITY,onSuccess:o}):null};var se=function(){var e=(0,x.x)().selectedToken,n=(0,_.Z)(),t=(0,W.UO)(),i=(0,j.xB)(t),r=(0,$.Kr)().onOperationTypeChange,s=(0,m.$)().t,l=(0,x.O)(),a=l.toggleRemoveLiquidity,d=l.toggleAddLiquidity;(0,P.Z)((function(){r(X.C8.MANAGE_LIQUIDITY)}));var u=(0,o.useMemo)((function(){return e?[{text:"add-liquidity",method:function(){Y.Z.goToAddLiquidity(),d()}},{text:"remove-liquidity",method:function(){Y.Z.goToRemoveLiquidity(),a()}}]:[]}),[n,e]),c=(0,o.useCallback)((function(e){n(Q.Z.manageLiquidity.navigateToAddLiquidity.replace(":id",e.tokenMinter)),Y.Z.selectTokenToTrade(e.displayName)}),[n]);return(0,w.jsxs)(G.Fi,{children:[e&&(0,w.jsx)(U.Z,{items:u,action:i}),(0,w.jsxs)(W.Z5,{children:[(0,w.jsx)(W.AW,{path:Q.Z.manageLiquidity.addLiquidity,element:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ie,{}),(0,w.jsx)(C,{})]})}),(0,w.jsx)(W.AW,{path:Q.Z.manageLiquidity.removeLiquidity,element:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(re,{}),(0,w.jsx)(C,{})]})}),(0,w.jsx)(W.AW,{path:Q.Z.manageLiquidity.tokens,element:(0,w.jsx)(V.n,{onTokenSelect:c,title:s("select-token-liquidity")})})]})]})}}}]);