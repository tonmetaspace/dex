"use strict";(self.webpackChunktonswap_web=self.webpackChunktonswap_web||[]).push([[803],{84676:function(e,n,r){var t=r(17488),a=r(79832),o=r(63605),i=r(60140),s=r(77035),c=r(69328),u=r(34702),l=r(14862),d=r(2556),f=(0,o.ZP)(s.Z)({display:"flex",flexDirection:"column",alignItems:"center",gap:10});n.Z=function(e){var n=e.open,r=e.children,o=(0,l.X)().adapterId,s=!c.tq&&o===u.ht.TON_HUB;return(0,d.jsx)(t.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1},backdropFilter:"blur(5px) "},open:n,children:(0,d.jsxs)(f,{children:[(0,d.jsx)(a.Z,{color:"inherit"}),r,s&&(0,d.jsx)(i.Z,{children:"Please check tonhub wallet for pending notification"})]})})}},59341:function(e,n,r){var t=r(4519),a=r(78098),o=r(63605),i=r(28650),s=r(77035),c=r(4839),u=r(2556),l=(0,o.ZP)(s.Z)({"& &":{color:"white"},"& a":{color:"white"}});n.Z=function(){var e=(0,a.Ds)(),n=e.enqueueSnackbar,r=e.closeSnackbar;return{showNotification:(0,t.useCallback)((function(e){var t=e.message,a=e.variant,o=e.onClose,s=e.autoHideDuration,d=e.anchorOrigin,f=e.className,p=void 0===f?"":f,h=n((0,u.jsx)(l,{children:t}),{className:p,anchorOrigin:d,variant:a,autoHideDuration:s||5e3,onClose:o,onClick:function(){return r(h)},action:function(){return(0,u.jsx)(i.Z,{children:(0,u.jsx)(c.Z,{style:{width:20,height:20}})})}})}),[r,n])}}},52803:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var t=r(88214),a=r(15861),o=r(70885),i=r(30320),s=r(60140),c=r(97180),u=r(4519),l=r(52169),d=r(51469),f=r(91596),p=r(64905),h=r(62822),m=r(42820),x=r(84676),v=r(59341),Z=(0,m.Z)(i.Z)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",paddingBottom:"100px",paddingTop:50,width:"100%","& .screen-title":{marginBottom:30}}),g=r(42264),w=r(2556),k=(0,m.Z)(i.Z)({width:"100%",marginBottom:20}),b=(0,m.Z)(i.Z)({"& p":{fontSize:12,color:"red",marginTop:5}}),j=function(e){var n=e.onSubmit,r=(0,u.useState)(""),i=(0,o.Z)(r,2),c=i[0],l=i[1],f=(0,u.useState)(!1),p=(0,o.Z)(f,2),h=p[0],m=p[1],x=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(r),48===r.length){e.next=3;break}return e.abrupt("return");case 3:try{d.Address.parse(r),n(r),h&&m(!1)}catch(t){m(!0)}case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(k,{children:[(0,w.jsx)(g.Z,{className:"input",fullWidth:!0,label:"Enter jetton minter address",value:c,placeholder:"EQDrjaLahLkMB-hMCmkzOyBuHJ139ZUYmPHu6RRBKnbdLIYI",onChange:function(e){return x(e.target.value)},onFocus:function(){return m(!1)}}),h&&(0,w.jsx)(b,{children:(0,w.jsx)(s.Z,{children:"Invalid Address"})})]})};var y=function(e){var n=e.onFocus,r=e.onBlur;(0,u.useEffect)((function(){var e=function(){"visible"===document.visibilityState?n():r()};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[])};var I=function(e){var n=(0,u.useRef)(),r=(0,u.useCallback)((function(){clearInterval(n.current)}),[]);return(0,u.useEffect)((function(){return function(){r()}}),[r]),{startInterval:function(r){n.current=setInterval((function(){r()}),e||1e3)},stopInterval:r}};var S=function(){var e=I(),n=e.startInterval,r=e.stopInterval,o=(0,u.useRef)({}),i=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.dH(o.current.contractAddress);case 2:if(!e.sent){e.next=8;break}return o.current.isPollInProgress=!1,c(),o.current.onFinish(),e.abrupt("return");case 8:if(!(o.current.pollTries>=40)){e.next=13;break}return c(),o.current.onTimeout(),o.current.isPollInProgress=!1,e.abrupt("return");case 13:o.current.pollTries++;case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(a){var s,c,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.onFinish,c=a.onTimeout,u=a.contractAddress,o.current={onFinish:s,pollTries:0,isPollInProgress:!0,contractAddress:u,onTimeout:c},r(),n(i);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=function(){o.current.pollTries=0,r()};return(0,u.useEffect)((function(){return function(){r()}}),[]),y({onFocus:function(){o.current.isPollInProgress&&n(i)},onBlur:c}),{poll:s,cancelPolling:c}},F=r(66082),P=r(27597),C=r(14862),T=r(77116),B=(0,m.Z)(i.Z)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",maxWidth:400});var D=(0,m.Z)(i.Z)({display:"flex",alignItems:"center",gap:20,marginTop:20,marginBottom:40,"& .token-details-right":{},"& img":{height:"70px",width:"70px"},"& p":{fontSize:15}}),E=function(e){var n=e.tokenBalance,r=e.tokenData;return(0,w.jsxs)(D,{children:[(0,w.jsx)("img",{src:r.image,alt:""}),(0,w.jsxs)(i.Z,{className:"token-details-right",children:[(0,w.jsxs)(s.Z,{children:["Name: ",r.name]}),n&&(0,w.jsxs)(s.Z,{children:[" My Balance: ",n.toLocaleString()]})]})]})},A=function(){var e=(0,u.useState)(""),n=(0,o.Z)(e,2),r=n[0],i=n[1],m=(0,u.useState)(),g=(0,o.Z)(m,2),k=g[0],b=g[1],y=(0,u.useState)(!1),I=(0,o.Z)(y,2),D=I[0],A=I[1],N=(0,u.useState)(!1),H=(0,o.Z)(N,2),L=H[0],z=H[1],M=(0,u.useState)(),_=(0,o.Z)(M,2),O=_[0],R=_[1],U=S().poll,q=(0,P._)().addToken,X=(0,C.X)(),J=X.adapterId,K=X.session,W=(0,T.Z)(),Y=(0,v.Z)().showNotification,Q=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a,o,s,c,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z(!0),i(n),r=d.Address.parse(n),e.next=6,(0,p.wl)(r);case 6:return a=e.sent,e.next=9,(0,l.J6)(r,0);case 9:if(o=e.sent,s=o.futureAddress,!o.isDeployed){e.next=17;break}G(s.toFriendly(),r.toFriendly(),a),W("".concat(F.Z.pool.base,"/").concat(s.toFriendly())),e.next=24;break;case 17:return e.next=19,(0,p.BX)(r);case 19:c=e.sent,u=parseFloat((0,d.fromNano)(c.balance.toString())),R(a),b(u),z(!1);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),e.t0 instanceof Error&&(console.log(e.t0),z(!1),Y({message:(0,w.jsx)(w.Fragment,{children:"Something went wrong"}),variant:"error"}));case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var a,o,i,s=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:r,o=s.length>2&&void 0!==s[2]?s[2]:O){e.next=4;break}return e.abrupt("return");case 4:i={name:o.name,ammMinter:n,tokenMinter:a,color:(0,h.mr)(),displayName:o.name.toUpperCase(),image:o.image,isCustom:!0},q(i);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!0),e.next=4,(0,l._e)(d.Address.parse(r));case 4:if(n=e.sent){e.next=7;break}throw new Error("Transaction error");case 7:if(n&&!n.error){e.next=9;break}throw new Error(n.error);case 9:return e.next=11,f.z.requestTransaction(J,K,n);case 11:return e.next=13,(0,h.gw)(5e3);case 13:U({onFinish:function(){G(n.to),Y({message:(0,w.jsx)(w.Fragment,{children:"Pool deployed successfully"}),variant:"success"}),A(!1),W("".concat(F.Z.pool.base,"/").concat(n.to))},onTimeout:function(){Y({message:(0,w.jsx)(w.Fragment,{children:"Something went wrong"}),variant:"error"})},contractAddress:n.to}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),A(!1),e.t0 instanceof Error&&Y({message:(0,w.jsx)(w.Fragment,{children:"Something went wrong"}),variant:"error"});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(Z,{children:[(0,w.jsx)(x.Z,{open:D,children:(0,w.jsx)(s.Z,{children:"Deploying pool..."})}),(0,w.jsx)(x.Z,{open:L,children:(0,w.jsx)(s.Z,{children:"Loading..."})}),(0,w.jsxs)(B,{children:[(0,w.jsx)(c.UH,{title:"Create a new Pool"}),(0,w.jsx)(j,{onSubmit:Q}),O&&(0,w.jsx)(E,{tokenData:O,tokenBalance:k}),(0,w.jsx)(c.Kk,{isDisabled:!(r.length&&d.Address.isFriendly(r)&&(null===O||void 0===O?void 0:O.name)),onClick:V,children:"Deploy Pool \ud83d\ude80"})]})]})}}}]);
//# sourceMappingURL=803.25a5b2cc.chunk.js.map